<html>
  <head>
    <title>Pizero Temperature real-time plots</title>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(draw1Visualization);

//######
      function draw1Visualization() {
		// Some raw data (not necessarily accurate)
	var data = google.visualization.arrayToDataTable([
		['Time', 'Temp'],
		['2021-01-21T17:40:01',18.375],
['2021-01-21T17:45:01',18.1875],
['2021-01-21T17:50:02',18.3125],
['2021-01-21T17:55:02',18.6875],
['2021-01-21T18:00:01',18.25],
['2021-01-21T18:05:02',18.125],
['2021-01-21T18:10:01',18.0625],
['2021-01-21T18:15:01',18.125],
['2021-01-21T18:20:02',18.1875],
['2021-01-21T18:25:02',18.125],
['2021-01-21T18:30:02',18.125],
['2021-01-21T18:35:01',18.125],
['2021-01-21T18:40:01',18],
['2021-01-21T18:45:01',18],
['2021-01-21T18:50:02',18.125],
['2021-01-21T18:55:01',18],
['2021-01-21T19:00:01',17.875],
['2021-01-21T19:05:02',17.875],
['2021-01-21T19:10:01',17.75],
['2021-01-21T19:15:01',17.6875],
['2021-01-21T19:20:01',17.6875],
['2021-01-21T19:25:01',17.875],
['2021-01-21T19:30:01',18.0625],
['2021-01-21T19:35:02',18.25],
['2021-01-21T19:40:01',17.9375],
['2021-01-21T19:45:02',18.0625],
['2021-01-21T19:50:01',17.9375],
['2021-01-21T19:55:01',18.125],
['2021-01-21T20:00:01',18],
['2021-01-21T20:05:01',17.9375],
['2021-01-21T20:10:01',17.9375],
['2021-01-21T20:15:01',17.875],
['2021-01-21T20:20:01',17.875],
['2021-01-21T20:25:01',17.8125],
['2021-01-21T20:30:01',17.875],
['2021-01-21T20:35:01',17.875],
['2021-01-21T20:40:01',17.875],
['2021-01-21T20:45:01',17.8125],
['2021-01-21T20:50:01',17.75],
['2021-01-21T20:55:01',17.6875],
['2021-01-21T21:00:01',17.5],
['2021-01-21T21:05:02',17.5625],
['2021-01-21T21:10:02',17.5],
['2021-01-21T21:15:02',17.5],
['2021-01-21T21:20:01',17.4375],
['2021-01-21T21:25:01',17.4375],
['2021-01-21T21:30:01',17.375],
['2021-01-21T21:35:01',17.4375],
['2021-01-21T21:40:01',17.375],
['2021-01-21T21:45:02',17.375],
['2021-01-21T21:50:01',17.375],
['2021-01-21T21:55:01',17.4375],
['2021-01-21T22:00:01',17.5],
['2021-01-21T22:05:01',17.5],
['2021-01-21T22:10:01',17.5],
['2021-01-21T22:15:01',17.5625],
['2021-01-21T22:20:01',17.6875],
['2021-01-21T22:25:01',17.6875],
['2021-01-21T22:30:01',17.875],
['2021-01-21T22:35:01',17.8125],
['2021-01-21T22:40:01',17.875],
['2021-01-21T22:45:02',17.9375],
['2021-01-21T22:50:01',17.9375],
['2021-01-21T22:55:01',18],
['2021-01-21T23:00:01',18],
['2021-01-21T23:05:01',18.0625],
['2021-01-21T23:10:01',18.0625],
['2021-01-21T23:15:01',18.0625],
['2021-01-21T23:20:02',18.0625],
['2021-01-21T23:25:01',18.625],
['2021-01-21T23:30:01',18],
['2021-01-21T23:35:01',17.875],
['2021-01-21T23:40:01',17.875],
['2021-01-21T23:45:02',19.75],
['2021-01-21T23:50:01',18.125],
['2021-01-21T23:55:01',17.875],
['2021-01-22T00:00:01',17.75],
['2021-01-22T00:05:02',17.8125],
['2021-01-22T00:10:02',17.625],
['2021-01-22T00:15:01',17.5],
['2021-01-22T00:20:01',17.5],
['2021-01-22T00:25:01',17.1875],
['2021-01-22T00:30:01',17.0625],
['2021-01-22T00:35:02',16.9375],
['2021-01-22T00:40:01',16.8125],
['2021-01-22T00:45:01',16.6875],
['2021-01-22T00:50:01',16.625],
['2021-01-22T00:55:01',16.4375],
['2021-01-22T01:00:01',16.4375],
['2021-01-22T01:05:02',16.3125],
['2021-01-22T01:10:02',16.3125],
['2021-01-22T01:15:02',16.1875],
['2021-01-22T01:20:01',16.1875],
['2021-01-22T01:25:01',16],
['2021-01-22T01:30:01',16],
['2021-01-22T01:35:01',15.8125],
['2021-01-22T01:40:02',15.75],
['2021-01-22T01:45:01',15.625],
['2021-01-22T01:50:01',15.5625],
['2021-01-22T01:55:02',15.5],
['2021-01-22T02:00:01',15.4375],
['2021-01-22T02:05:02',15.375],
['2021-01-22T02:10:01',15.375],
['2021-01-22T02:15:02',15.1875],
['2021-01-22T02:20:01',15.25],
['2021-01-22T02:25:01',15.125],
['2021-01-22T02:30:02',15.0625],
['2021-01-22T02:35:01',15],
['2021-01-22T02:40:01',14.875],
['2021-01-22T02:45:01',14.875],
['2021-01-22T02:50:02',14.8125],
['2021-01-22T02:55:01',14.6875],
['2021-01-22T03:00:01',14.6875],
['2021-01-22T03:05:01',14.5625],
['2021-01-22T03:10:01',14.5],
['2021-01-22T03:15:01',14.4375],
['2021-01-22T03:20:01',14.375],
['2021-01-22T03:25:01',14.375],
['2021-01-22T03:30:01',14.25],
['2021-01-22T03:35:02',14.25],
['2021-01-22T03:40:01',14.1875],
['2021-01-22T03:45:01',14.125],
['2021-01-22T03:50:01',14.0625],
['2021-01-22T03:55:01',14.0625],
['2021-01-22T04:00:01',14],
['2021-01-22T04:05:02',13.9375],
['2021-01-22T04:10:01',13.875],
['2021-01-22T04:15:01',13.8125],
['2021-01-22T04:20:01',13.8125],
['2021-01-22T04:25:01',13.75],
['2021-01-22T04:30:01',13.6875],
['2021-01-22T04:35:01',13.6875],
['2021-01-22T04:40:01',13.625],
['2021-01-22T04:45:01',13.5625],
['2021-01-22T04:50:01',13.5],
['2021-01-22T04:55:01',13.5],
['2021-01-22T05:00:01',13.5],
['2021-01-22T05:05:01',13.4375],
['2021-01-22T05:10:01',13.375],
['2021-01-22T05:15:01',13.3125],
['2021-01-22T05:20:01',13.375],
['2021-01-22T05:25:01',13.25],
['2021-01-22T05:30:01',13.3125],
['2021-01-22T05:35:01',13.25],
['2021-01-22T05:40:01',13.125],
['2021-01-22T05:45:01',13.1875],
['2021-01-22T05:50:01',13.0625],
['2021-01-22T05:55:01',13.0625],
['2021-01-22T06:00:01',13],
['2021-01-22T06:05:01',13],
['2021-01-22T06:10:01',12.875],
['2021-01-22T06:15:01',12.875],
['2021-01-22T06:20:01',12.875],
['2021-01-22T06:25:02',12.8125],
['2021-01-22T06:30:01',12.8125],
['2021-01-22T06:35:01',12.75],
['2021-01-22T06:40:01',12.6875],
['2021-01-22T06:45:02',12.6875],
['2021-01-22T06:50:01',12.6875],
['2021-01-22T06:55:01',12.625],
['2021-01-22T07:00:01',12.5625],
['2021-01-22T07:05:02',12.625],
['2021-01-22T07:10:01',12.5625],
['2021-01-22T07:15:01',12.5625],
['2021-01-22T07:20:01',12.5625],
['2021-01-22T07:25:02',12.625],
['2021-01-22T07:30:01',12.875],
['2021-01-22T07:35:02',13.0625],
['2021-01-22T07:40:01',13.3125],
['2021-01-22T07:45:02',13.4375],
['2021-01-22T07:50:02',13.5],
['2021-01-22T07:55:01',13.5],
['2021-01-22T08:00:01',13.6875],
['2021-01-22T08:05:01',13.8125],
['2021-01-22T08:10:01',14],
['2021-01-22T08:15:01',14.125],
['2021-01-22T08:20:02',14.25],
['2021-01-22T08:25:01',14.3125],
['2021-01-22T08:30:01',14.625],
['2021-01-22T08:35:01',14.75],
['2021-01-22T08:40:02',15.0625],
['2021-01-22T08:45:01',16.25],
['2021-01-22T08:50:02',16.6875],
['2021-01-22T08:55:01',16.875],
['2021-01-22T09:00:01',16.6875],
['2021-01-22T09:05:02',16.625],
['2021-01-22T09:10:01',16.75],
['2021-01-22T09:15:01',16.9375],
['2021-01-22T09:20:02',17],
['2021-01-22T09:25:02',17.4375],
['2021-01-22T09:30:01',17.3125],
['2021-01-22T09:35:01',17.5],
['2021-01-22T09:40:01',17.375],
['2021-01-22T09:45:01',17.1875],
['2021-01-22T09:50:01',17.25],
['2021-01-22T09:55:01',17.125],
['2021-01-22T10:00:01',17.3125],
['2021-01-22T10:05:01',17.4375],
['2021-01-22T10:10:01',17.3125],
['2021-01-22T10:15:01',17.5],
['2021-01-22T10:20:01',17.375],
['2021-01-22T10:25:01',17.4375],
['2021-01-22T10:30:02',17.5],
['2021-01-22T10:35:01',17.5625],
['2021-01-22T10:40:01',17.5],
['2021-01-22T10:45:01',17.5],
['2021-01-22T10:50:01',17.5625],
['2021-01-22T10:55:01',17.625],
['2021-01-22T11:00:01',17.5625],
['2021-01-22T11:05:01',17.5],
['2021-01-22T11:10:01',17.5625],
['2021-01-22T11:15:01',17.5],
['2021-01-22T11:20:02',17.5],
['2021-01-22T11:25:02',17.5],
['2021-01-22T11:30:01',17.5625],
['2021-01-22T11:35:01',17.5625],
['2021-01-22T11:40:01',17.875],
['2021-01-22T11:45:02',17.9375],
['2021-01-22T11:50:01',17.9375],
['2021-01-22T11:55:01',18.0625],
['2021-01-22T12:00:02',18.0625],
['2021-01-22T12:05:01',18.1875],
['2021-01-22T12:10:01',18.3125],
['2021-01-22T12:15:01',18.375],
['2021-01-22T12:20:01',18.5],
['2021-01-22T12:25:01',18.625],
['2021-01-22T12:30:01',18.6875],
['2021-01-22T12:35:01',18.5625],
['2021-01-22T12:40:01',18.5],
['2021-01-22T12:45:01',18.625],
['2021-01-22T12:50:01',18.625],
['2021-01-22T12:55:01',18.6875],
['2021-01-22T13:00:01',18.75],
['2021-01-22T13:05:01',18.625],
['2021-01-22T13:10:01',18.6875],
['2021-01-22T13:15:02',18.6875],
['2021-01-22T13:20:01',18.9375],
['2021-01-22T13:25:01',18.9375],
['2021-01-22T13:30:01',18.9375],
['2021-01-22T13:35:01',19.0625],
['2021-01-22T13:40:01',19.125],
['2021-01-22T13:45:01',18.9375],
['2021-01-22T13:50:01',18.9375],
['2021-01-22T13:55:01',18.9375],
['2021-01-22T14:00:01',18.875],
['2021-01-22T14:05:01',18.875],
['2021-01-22T14:10:01',18.8125],
['2021-01-22T14:15:01',18.625],
['2021-01-22T14:20:01',18.625],
['2021-01-22T14:25:02',18.8125],
['2021-01-22T14:30:01',19.3125],
['2021-01-22T14:35:01',19.25],
['2021-01-22T14:40:01',19],
['2021-01-22T14:45:01',20],
['2021-01-22T14:50:01',21.25],
['2021-01-22T14:55:02',20.5625],
['2021-01-22T15:00:01',21.625],
['2021-01-22T15:05:01',21.5],
['2021-01-22T15:10:01',20.75],
['2021-01-22T15:15:01',20.6875],
['2021-01-22T15:20:02',21.125],
['2021-01-22T15:25:01',19.6875],
['2021-01-22T15:30:01',19.5625],
['2021-01-22T15:35:02',19.4375],
['2021-01-22T15:40:01',19.25],
['2021-01-22T15:45:02',19.1875],
['2021-01-22T15:50:01',19.0625],
['2021-01-22T15:55:01',19.1875],
['2021-01-22T16:00:01',19.3125],
['2021-01-22T16:05:01',19.375],
['2021-01-22T16:10:01',19.4375],
['2021-01-22T16:15:01',19.4375],
['2021-01-22T16:20:02',19.4375],
['2021-01-22T16:25:01',19.5],
['2021-01-22T16:30:01',19.5],
['2021-01-22T16:35:02',19.5625],
['2021-01-22T16:40:01',19.6875],
['2021-01-22T16:45:01',19.6875],
['2021-01-22T16:50:01',18.9375],
['2021-01-22T16:55:01',18.875],
['2021-01-22T17:00:01',18.8125],
['2021-01-22T17:05:01',19.1875],
['2021-01-22T17:10:01',19],
['2021-01-22T17:15:01',19.1875],
['2021-01-22T17:20:01',19.4375],
['2021-01-22T17:25:01',20.375],
['2021-01-22T17:30:01',19.9375],
['2021-01-22T17:35:01',19.75],
		]);
        var options = {
          title : 'PiZero Temp Log 2021-01-22T17:35:01',
          vAxis: {title: 'Degrees',minValue:7,viewWindow:{ min: 7 }},
          hAxis: {title: 'Timestamp'},
          seriesType: 'bars',
          series: {1: {type: 'line'}}
        };

        var chart = new google.visualization.ComboChart(document.getElementById('chart_div1'));
        chart.draw(data, options);
	}
//######
    </script>
    <script type="text/javascript" src="vendor/smoothie.js"></script>
    <script type="text/javascript" src="vendor/reconnecting-websocket.min.js"></script>
    <script type="text/javascript">

      var readings = new TimeSeries();

      function createTimeline() {
        var chart = new SmoothieChart({
          millisPerPixel: 1000,
          interpolation:'bezier',
       grid:{millisPerLine:60000,verticalSections:15,fillStyle:'#ffffff'},
       tooltip:true,
       timestampFormatter:SmoothieChart.timeFormatter,
          minValue:0.0,
          maxValue:30.0
        });

        chart.addTimeSeries(readings, { 
            strokeStyle: '#006eff',
            fillStyle: 'rgba(122,122,122,0.30)',
            lineWidth: 3 });

        chart.streamTo(document.getElementById("chart"), 500);
      }

      var ws = new ReconnectingWebSocket('ws://192.168.1.26:8080/');
      ws.onopen = function() {
        document.body.style.backgroundColor = '#fff';
      };
      ws.onclose = function() {
        document.body.style.backgroundColor = null;
      };
      ws.onmessage = function(event) {
        var data = event.data.split(",");
        var timestamp = parseFloat(data[0]) * 1000;  // expects ms
        var value = parseFloat(data[1]);
        readings.append(timestamp, value);
        document.getElementById("temperature").innerHTML = value;
      };

    var myVar = setInterval(myTimer, 1000);

    function myTimer() {
     var d = new Date();
     var t = 'PiZero Temperature Sensor '+d.toLocaleTimeString();
     document.getElementById("demo2").innerHTML = t;
    }

    </script>
  </head>
  <body onload="createTimeline()">
    <h2 id="demo2"></h2>
    <h2 id="temperature"></h2>
    <canvas id="chart" width=800 height="400"></canvas>
    <div id="chart_div1" style="width: 800px; height: 400px;"></div>

  </body>
</html>
